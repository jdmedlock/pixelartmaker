(function () {
'use strict';

class AppWindow {
  /**
   * @description Get the value associated with the named CSS variable
   * @returns {any} cssVarName - CSS variable type
   * @memberof AppWindow
   */
  getCssVariable(cssVarName, varType) {
    const htmlStyles = window.getComputedStyle(document.querySelector('html'));
    const rawValue = htmlStyles.getPropertyValue('--' + cssVarName);
    let varValue = null;
    switch (varType) {
      case 'number':
        varValue = parseInt(rawValue);
        break;
      case 'string':
        varValue = String.toString(rawValue);
        break;
      default: 
        throw new Error(`getCssVariable: unknown value type of ${valueType} /
          encountered`);
    }
    return varValue;
  }
  
  /**
   * @description Set the value of a CSS variable
   * @param {String} cssVarName - Name of the CSS variable to update
   * @param {any} varValue - Value to be assigned to the CSS variable
   * @memberof AppWindow
   */
  setCssVariable(cssVarName, varValue) {
    document.documentElement.style.setProperty('--' + cssVarName, varValue);
  }
}

class Grid {
  /**
   * @description Grid constructor initializes a new Grid given its dimensions.
   * @param {Integer} columnCount - Number of columns in the grid
   * @param {Integer} rowCount - Number of rows in the grid
   * @memberof Grid
   */
  constructor(columnCount, rowCount) {
    // Validate the input parameters
    if (isNaN(columnCount)) {
      return new Error(`Column count is not numeric: ${columnCount}.`);
    }
    if (columnCount < 1 || columnCount > 99) {
      return new Error(`Column count must be between 1 and 99, ${columnCount} is invalid.`);
    }

    if (isNaN(rowCount)) {
      return new Error(`Column count is not numeric: ${rowCount}.`);
    }
    if (rowCount < 1 || rowCount > 99) {
      return new Error(`Column count must be between 1 and 99, ${rowCount} is invalid.`);
    }

    // Populate object variables
    this.columnCount = columnCount;
    this.rowCount = rowCount;
    this.minColumnCount = 1;
    this.maxColumnCount = 99;
    this.minRowCount = 1;
    this.maxRowCount = 99;
    this.defaultGridCellColor = 'rgb(232, 232, 232)'; // Light grey #e8e8e8

    // Create a new grid using the supplied dimensions and nitialize each cell to
    // the default cell color.
    this.grid = new Array(this.rowCount);
    this.clearGrid();
  }
  
/*
  /**
   * @description Return a JSON representation of the design grid
   * @returns {Object} JSON object defining the current design grid
   * @readonly
   * @memberof Grid
   * /
  get grid() {
    return JSON.stringify(this._grid);
  }
  /**
   * @description Populate the design grid from a JSON object
   * @memberof Grid
   * /
  set grid(gridObject) {
    this._grid = JSON.parse(gridObject);
  }
*/

  /**
   * @description Get the current number of columns in the grid.
   * @returns {Integer} - Number of columns in the grid
   * @readonly
   * @memberof Grid
   */
  getColumnCount() {
    return this.columnCount;
  }

  /**
   * @description Update the number of grid columns
   * @param {Integer} count - Column count
   * @memberof Grid
   */
  setColumnCount(count) {
    if (isNaN(count)) {
      return new Error(`Column count is not numeric: ${count}.`);
    }
    if (count < 1 || count > 99) {
      return new Error(`Column count must be between 1 and 99, ${count} is invalid.`);
    }
    this.columnCount = count;
    this.makeGrid();
  }

  /**
   * @description Get the current number of rows in the grid.
   * @returns {Integer} - Number of rows in the grid
   * @readonly
   * @memberof Grid
   */
  getRowCount() {
    return this.rowCount;
  }

  /**
   * @description Update the number of grid rows
   * @param {Integer} count - Row count
   * @memberof Grid
   */
  setRowCount(count) {
    if (isNaN(count)) {
      return new Error(`Row count is not numeric: ${count}.`);
    }
    if (count < 1 || count > 99) {
      return new Error(`Row count must be between 1 and 99, ${count} is invalid.`);
    }
    this.rowCount = count;
    this.makeGrid();
  }

  /**
   * @description Decrement the grid column count
   * @returns {any} The new column count or an Error object If current value is at the
   * maximum column count.
   * @memberof Grid
   */
  decrColumnCount() {
    if (this.columnCount === this.minColumnCount) {
      return new Error(`Minimum row limit of ${this.minColumnCount} already reached.`);
    }
    this.columnCount -= 1;
    this.makeGrid();
    return this.columnCount;
  }

  /**
   * @description Increment the grid column count
   * @returns {any} The new column count or an Error object If current value is at the
   * maximum column count.
   * @memberof Grid
   */
  incrColumnCount() {
    if (this.columnCount === this.maxColumnCount) {
      return new Error(`Maximum row limit of ${this.maxColumnCount} already reached.`);
    }
    this.columnCount += 1;
    this.makeGrid();
    return this.columnCount;
  }
  
  /**
   * @description Decrement the grid row count
   * @returns {any} The new row count or an Error object If current value is at the
   * minimum row count.
   * @memberof Grid
   */
  decrRowCount() {
    if (this.rowCount === this.minRowCount) {
      return new Error(`Minimum row limit of ${this.maxRowCount} already reached.`);
    }
    this.rowCount -= 1;
    this.makeGrid();
    return this.rowCount;
  }

  /**
   * @description Increment the grid row count
   * @returns {any} The new column count or an Error object If current value is at the
   * maximum row count.
   * @memberof Grid
   */
  incrRowCount() {
    if (this.rowCount === this.maxRowCount) {
      return new Error(`Maximum row limit of ${this.maxRowCount} already reached.`);
    }
    this.rowCount += 1;
    this.makeGrid();
    return this.rowCount;
  }

  /**
   * @description Clear the current grid
   * @memberof Grid
   */
  clearGrid() {
    for (let rowNo = 0; rowNo < this.rowCount; rowNo++) {
      this.grid[rowNo] = new Array(this.columnCount);
      for (let columnNo = 0; columnNo < this.columnCount; columnNo++) {
        this.grid[rowNo][columnNo] = this.defaultGridCellColor;
      }
    }
    this.makeGrid();
  }

  /**
   * @description Render the grid by generating and adding a new DOM element for
   * each cell in the grid.
   * @memberof Grid
   */
  makeGrid() {
    const gridCellTemplate = '<div class="design-grid-cell"></div>';
    let gridCellElements = '';
    for (let rowNo = 0; rowNo < this.rowCount; rowNo++) {
      for (let columnNo = 0; columnNo < this.columnCount; columnNo++) {
        gridCellElements += gridCellTemplate;
      }
    }
    const appWindow = new AppWindow();
    appWindow.setCssVariable('designGridColumnCount', this.columnCount);
    appWindow.setCssVariable('designGridRowCount', this.rowCount);
    $( ".design-grid" ).empty();
    $( ".design-grid" ).append( gridCellElements );
  }
}

class Palette {
  /**
   * @description Palette constructor initializes a new Palette object
   * @memberof Grid
   */
  constructor(columnCount, rowCount) {
    this.defaultColor = 'rgb(0, 0, 232)';
    this.newColor = this.defaultColor;
    this.currentColor = this.defaultColor;
    this.newColorShades = this.createShades(this.newColor);
    this.currentColorShades = this.createShades(this.currentColor);
    this.recentColors = this.createShades(this.currentColor);
  }

  /**
   * @description Generate an array of five shades of the provided color using equal
   * amounts of power to all of the light sources.
   * @param {any} color A string formatted as 'rgb(nnn,nnn,nnn)' where 'nnn' is a
   * value from 0-255 representing the red, green, and blue color value.
   * @returns {[String]} Array of five shade values based on the provided color
   * @memberof Palette
   */
  createShades(color) {
    // TODO: Validate input parameter
    const noOfShades = 6;
    const step = parseInt(256 / noOfShades, 10);
    let shades = [];
    let [red, green, blue] = color.split('rgb(')[1].split(')')[0].split(',');

    for (let i = 0; i < noOfShades; i++) {
      red = parseInt(red, 10) + step;
      green = parseInt(green, 10) + step;
      blue = parseInt(blue, 10) + step;
      blue = blue > 255 ? 255 : blue;
      shades.push(`rgb(${red}, ${green}, ${blue})`);
    }
    return shades.reverse();
  }
  /**
   * @description Retrieve the currently selected color
   * @returns {String} A string formatted as 'rgb(nnn,nnn,nnn)' where 'nnn' is a
   * value from 0-255 representing the red, green, and blue color value.
   * @memberof Palette
   */
  getCurrentColor() {
    return this.currentColor;
  }

  /**
   * @description Retrieve a color from the recently used colors array. 
   * @param {Number} index The position of the color in the recently used array, 
   * where 0 represents the most recently used color.
   * @returns  {String} A string formatted as 'rgb(nnn,nnn,nnn)' where 'nnn' is a
     * value from 0-255 representing the red, green, and blue color value.
   * @memberof Palette
   */
  getRecentColor(index) {
    return (index >= 0 && index <= this.recentColors.length) 
      ? this.recentColors[index] 
      : new Error(`Recent color index must be between 0 and ${this.recentColors.length}. ${index} was passed.`);
  }

  /**
   * @description Retrieve and array containing the shades of the current color
   * @returns  {[String]} Array of five shade values based on the provided color
   * @memberof Palette
   */
  getShades() {
    return this.currentColorShades;
  }

  /**
   * @description Render the array of recently used colors onto the HTML page
   * @param {[String]} colorArray Array of colors representing the most recently used colors.
   * @memberof Palette
   */
  renderRecentColors(colorArray) {
    // TODO: Validate the input parameter
    colorArray.forEach((element, index) => {
      console.log(`renderRecentColors - index: ${index} element: ${element}`);
      $( "#recent-color-" + index ).css('background-color',element);
    });
  }

  /**
   * @description Update the currently selected color to a new value
   * @param {String} color A string formatted as 'rgb(nnn,nnn,nnn)' where 'nnn' is a
   * value from 0-255 representing the red, green, and blue color value.
   * @memberof Palette
   */
  setCurrentColor(color) {
    // TODO: Validate the input parameter
    console.log(`setCurrentColor - color: ${color}`);
    this.currentColor = color;
    $( ".color-selector-button" ).css('background-color',color);
    this.updateRecentColors(color);
  }

  /**
   * @description Update the recent colors array so the most recently used color 
   * occupies position 0 in the array.
   * @param {String} color A string formatted as 'rgb(nnn,nnn,nnn)' where 'nnn' is a
   * value from 0-255 representing the red, green, and blue color value.
   * @memberof Palette
   */
  updateRecentColors(color) {
    const colorIndex = this.recentColors.indexOf(color);
    console.log(`updateRecentColors - color: ${color} colorIndex: ${colorIndex}`);
    if (colorIndex === undefined) {
      // If the color hasn't been recently used remove the last element and then push
      // it onto the array
      this.recentColors.splice(this.recentColors.length-1, 1);
      this.recentColors.push(color);
    } else {
      // If the color is already in the array remove it and push it back onto the array
      // so it occupies position 0
      console.log(`Starting colorIndex: ${colorIndex} recentColors: ${this.recentColors}`);
      const deletedColors = this.recentColors.splice(colorIndex, 1);
      console.log(`updateRecentColors - deletedColors: ${deletedColors} recentColors: ${this.recentColors}`);
      this.recentColors.push(color);
      console.log(`Ending recentColors: ${this.recentColors}`);
    }
    this.renderRecentColors(this.recentColors);
  }

}

let designGrid = null;
let colorPalette = null;
const appWindow = new AppWindow();

$(document).ready(function() {
  console.clear();

  // Create event handlers for the main app buttons
  $("#clear-grid-btn").click((event) => {
    designGrid.clearGrid();
  });
  
  // Render the color chooser control and create its event handlers
  colorPalette = new Palette();
  colorPalette.renderRecentColors(colorPalette.getShades());
  /*
  colorPalette.getShades().forEach((element, index) => {
    $( "#recent-color-" + index ).css('background-color',element);
  });
  */
  colorPalette.renderRecentColors(colorPalette.getShades());
  $( ".recent-color-wrapper" ).on( 'click', '.recent-color', function() {
    colorPalette.setCurrentColor($(this).css('background-color'));
  });

  // Render the design grid and its event handlers
  designGrid = new Grid(
    appWindow.getCssVariable('designGridRowCount', 'number'), 
    appWindow.getCssVariable('designGridColumnCount', 'number')
  );
  designGrid.makeGrid();

  // Create a delegated event handler on the Design Grid.
  $( ".design-grid" ).on( "click", ".design-grid-cell", function() {
    $(this).css('background-color',colorPalette.getCurrentColor());
  });

  $('.column-count').change(() => { 
    designGrid.setColumnCount($('#column-count-box').val());
  });

  $(".column-minus").click((event) => {
    try {
      designGrid.decrColumnCount();
      $('#column-count-box').val(designGrid.getColumnCount());
    }
    catch(error) {
      console.log(`Error decrementing column count. error:${error}`);
    }
  });

  $(".column-plus").click((event) => {
    try {
      designGrid.incrColumnCount();
      $('#column-count-box').val(designGrid.getColumnCount());
    }
    catch(error) {
      console.log(`Error incrementing column count. error:${error}`);
    }
  });

  $('.row-count').change(() => { 
    designGrid.setRowCount($('#row-count-box').val());
  });  

  $(".row-minus").click((event) => {
    try {
      designGrid.decrRowCount();
      $('#row-count-box').val(designGrid.getRowCount());
    }
    catch(error) {
      console.log(`Error decrementing row count. error:${error}`);
    }
  });

  $(".row-plus").click((event) => {
    try {
      designGrid.incrRowCount();
      $('#row-count-box').val(designGrid.getRowCount());
    }
    catch(error) {
      console.log(`Error incrementing row count. error:${error}`);
    }
  });

});

}());
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXgubWluLmpzIiwic291cmNlcyI6WyIuLi8uLi9zcmMvY2xhc3Nlcy9BcHBXaW5kb3cuanMiLCIuLi8uLi9zcmMvY2xhc3Nlcy9HcmlkLmpzIiwiLi4vLi4vc3JjL2NsYXNzZXMvUGFsZXR0ZS5qcyIsIi4uLy4uL3NyYy9ob21lL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEFwcFdpbmRvdyB7XG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb24gR2V0IHRoZSB2YWx1ZSBhc3NvY2lhdGVkIHdpdGggdGhlIG5hbWVkIENTUyB2YXJpYWJsZVxuICAgKiBAcmV0dXJucyB7YW55fSBjc3NWYXJOYW1lIC0gQ1NTIHZhcmlhYmxlIHR5cGVcbiAgICogQG1lbWJlcm9mIEFwcFdpbmRvd1xuICAgKi9cbiAgZ2V0Q3NzVmFyaWFibGUoY3NzVmFyTmFtZSwgdmFyVHlwZSkge1xuICAgIGNvbnN0IGh0bWxTdHlsZXMgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJykpO1xuICAgIGNvbnN0IHJhd1ZhbHVlID0gaHRtbFN0eWxlcy5nZXRQcm9wZXJ0eVZhbHVlKCctLScgKyBjc3NWYXJOYW1lKTtcbiAgICBsZXQgdmFyVmFsdWUgPSBudWxsO1xuICAgIHN3aXRjaCAodmFyVHlwZSkge1xuICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgdmFyVmFsdWUgPSBwYXJzZUludChyYXdWYWx1ZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgdmFyVmFsdWUgPSBTdHJpbmcudG9TdHJpbmcocmF3VmFsdWUpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6IFxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGdldENzc1ZhcmlhYmxlOiB1bmtub3duIHZhbHVlIHR5cGUgb2YgJHt2YWx1ZVR5cGV9IC9cbiAgICAgICAgICBlbmNvdW50ZXJlZGApO1xuICAgIH1cbiAgICByZXR1cm4gdmFyVmFsdWU7XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb24gU2V0IHRoZSB2YWx1ZSBvZiBhIENTUyB2YXJpYWJsZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gY3NzVmFyTmFtZSAtIE5hbWUgb2YgdGhlIENTUyB2YXJpYWJsZSB0byB1cGRhdGVcbiAgICogQHBhcmFtIHthbnl9IHZhclZhbHVlIC0gVmFsdWUgdG8gYmUgYXNzaWduZWQgdG8gdGhlIENTUyB2YXJpYWJsZVxuICAgKiBAbWVtYmVyb2YgQXBwV2luZG93XG4gICAqL1xuICBzZXRDc3NWYXJpYWJsZShjc3NWYXJOYW1lLCB2YXJWYWx1ZSkge1xuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS0nICsgY3NzVmFyTmFtZSwgdmFyVmFsdWUpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFwcFdpbmRvdzsiLCJpbXBvcnQgQXBwV2luZG93IGZyb20gJy4uL2NsYXNzZXMvQXBwV2luZG93JztcblxuY2xhc3MgR3JpZCB7XG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb24gR3JpZCBjb25zdHJ1Y3RvciBpbml0aWFsaXplcyBhIG5ldyBHcmlkIGdpdmVuIGl0cyBkaW1lbnNpb25zLlxuICAgKiBAcGFyYW0ge0ludGVnZXJ9IGNvbHVtbkNvdW50IC0gTnVtYmVyIG9mIGNvbHVtbnMgaW4gdGhlIGdyaWRcbiAgICogQHBhcmFtIHtJbnRlZ2VyfSByb3dDb3VudCAtIE51bWJlciBvZiByb3dzIGluIHRoZSBncmlkXG4gICAqIEBtZW1iZXJvZiBHcmlkXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihjb2x1bW5Db3VudCwgcm93Q291bnQpIHtcbiAgICAvLyBWYWxpZGF0ZSB0aGUgaW5wdXQgcGFyYW1ldGVyc1xuICAgIGlmIChpc05hTihjb2x1bW5Db3VudCkpIHtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoYENvbHVtbiBjb3VudCBpcyBub3QgbnVtZXJpYzogJHtjb2x1bW5Db3VudH0uYCk7XG4gICAgfVxuICAgIGlmIChjb2x1bW5Db3VudCA8IDEgfHwgY29sdW1uQ291bnQgPiA5OSkge1xuICAgICAgcmV0dXJuIG5ldyBFcnJvcihgQ29sdW1uIGNvdW50IG11c3QgYmUgYmV0d2VlbiAxIGFuZCA5OSwgJHtjb2x1bW5Db3VudH0gaXMgaW52YWxpZC5gKTtcbiAgICB9XG5cbiAgICBpZiAoaXNOYU4ocm93Q291bnQpKSB7XG4gICAgICByZXR1cm4gbmV3IEVycm9yKGBDb2x1bW4gY291bnQgaXMgbm90IG51bWVyaWM6ICR7cm93Q291bnR9LmApO1xuICAgIH1cbiAgICBpZiAocm93Q291bnQgPCAxIHx8IHJvd0NvdW50ID4gOTkpIHtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoYENvbHVtbiBjb3VudCBtdXN0IGJlIGJldHdlZW4gMSBhbmQgOTksICR7cm93Q291bnR9IGlzIGludmFsaWQuYCk7XG4gICAgfVxuXG4gICAgLy8gUG9wdWxhdGUgb2JqZWN0IHZhcmlhYmxlc1xuICAgIHRoaXMuY29sdW1uQ291bnQgPSBjb2x1bW5Db3VudDtcbiAgICB0aGlzLnJvd0NvdW50ID0gcm93Q291bnQ7XG4gICAgdGhpcy5taW5Db2x1bW5Db3VudCA9IDE7XG4gICAgdGhpcy5tYXhDb2x1bW5Db3VudCA9IDk5O1xuICAgIHRoaXMubWluUm93Q291bnQgPSAxO1xuICAgIHRoaXMubWF4Um93Q291bnQgPSA5OTtcbiAgICB0aGlzLmRlZmF1bHRHcmlkQ2VsbENvbG9yID0gJ3JnYigyMzIsIDIzMiwgMjMyKSc7IC8vIExpZ2h0IGdyZXkgI2U4ZThlOFxuXG4gICAgLy8gQ3JlYXRlIGEgbmV3IGdyaWQgdXNpbmcgdGhlIHN1cHBsaWVkIGRpbWVuc2lvbnMgYW5kIG5pdGlhbGl6ZSBlYWNoIGNlbGwgdG9cbiAgICAvLyB0aGUgZGVmYXVsdCBjZWxsIGNvbG9yLlxuICAgIHRoaXMuZ3JpZCA9IG5ldyBBcnJheSh0aGlzLnJvd0NvdW50KTtcbiAgICB0aGlzLmNsZWFyR3JpZCgpO1xuICB9XG4gIFxuLypcbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBSZXR1cm4gYSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBkZXNpZ24gZ3JpZFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBKU09OIG9iamVjdCBkZWZpbmluZyB0aGUgY3VycmVudCBkZXNpZ24gZ3JpZFxuICAgKiBAcmVhZG9ubHlcbiAgICogQG1lbWJlcm9mIEdyaWRcbiAgICogL1xuICBnZXQgZ3JpZCgpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy5fZ3JpZCk7XG4gIH1cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBQb3B1bGF0ZSB0aGUgZGVzaWduIGdyaWQgZnJvbSBhIEpTT04gb2JqZWN0XG4gICAqIEBtZW1iZXJvZiBHcmlkXG4gICAqIC9cbiAgc2V0IGdyaWQoZ3JpZE9iamVjdCkge1xuICAgIHRoaXMuX2dyaWQgPSBKU09OLnBhcnNlKGdyaWRPYmplY3QpO1xuICB9XG4qL1xuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb24gR2V0IHRoZSBjdXJyZW50IG51bWJlciBvZiBjb2x1bW5zIGluIHRoZSBncmlkLlxuICAgKiBAcmV0dXJucyB7SW50ZWdlcn0gLSBOdW1iZXIgb2YgY29sdW1ucyBpbiB0aGUgZ3JpZFxuICAgKiBAcmVhZG9ubHlcbiAgICogQG1lbWJlcm9mIEdyaWRcbiAgICovXG4gIGdldENvbHVtbkNvdW50KCkge1xuICAgIHJldHVybiB0aGlzLmNvbHVtbkNvdW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBVcGRhdGUgdGhlIG51bWJlciBvZiBncmlkIGNvbHVtbnNcbiAgICogQHBhcmFtIHtJbnRlZ2VyfSBjb3VudCAtIENvbHVtbiBjb3VudFxuICAgKiBAbWVtYmVyb2YgR3JpZFxuICAgKi9cbiAgc2V0Q29sdW1uQ291bnQoY291bnQpIHtcbiAgICBpZiAoaXNOYU4oY291bnQpKSB7XG4gICAgICByZXR1cm4gbmV3IEVycm9yKGBDb2x1bW4gY291bnQgaXMgbm90IG51bWVyaWM6ICR7Y291bnR9LmApO1xuICAgIH1cbiAgICBpZiAoY291bnQgPCAxIHx8IGNvdW50ID4gOTkpIHtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoYENvbHVtbiBjb3VudCBtdXN0IGJlIGJldHdlZW4gMSBhbmQgOTksICR7Y291bnR9IGlzIGludmFsaWQuYCk7XG4gICAgfVxuICAgIHRoaXMuY29sdW1uQ291bnQgPSBjb3VudDtcbiAgICB0aGlzLm1ha2VHcmlkKCk7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uIEdldCB0aGUgY3VycmVudCBudW1iZXIgb2Ygcm93cyBpbiB0aGUgZ3JpZC5cbiAgICogQHJldHVybnMge0ludGVnZXJ9IC0gTnVtYmVyIG9mIHJvd3MgaW4gdGhlIGdyaWRcbiAgICogQHJlYWRvbmx5XG4gICAqIEBtZW1iZXJvZiBHcmlkXG4gICAqL1xuICBnZXRSb3dDb3VudCgpIHtcbiAgICByZXR1cm4gdGhpcy5yb3dDb3VudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb24gVXBkYXRlIHRoZSBudW1iZXIgb2YgZ3JpZCByb3dzXG4gICAqIEBwYXJhbSB7SW50ZWdlcn0gY291bnQgLSBSb3cgY291bnRcbiAgICogQG1lbWJlcm9mIEdyaWRcbiAgICovXG4gIHNldFJvd0NvdW50KGNvdW50KSB7XG4gICAgaWYgKGlzTmFOKGNvdW50KSkge1xuICAgICAgcmV0dXJuIG5ldyBFcnJvcihgUm93IGNvdW50IGlzIG5vdCBudW1lcmljOiAke2NvdW50fS5gKTtcbiAgICB9XG4gICAgaWYgKGNvdW50IDwgMSB8fCBjb3VudCA+IDk5KSB7XG4gICAgICByZXR1cm4gbmV3IEVycm9yKGBSb3cgY291bnQgbXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDk5LCAke2NvdW50fSBpcyBpbnZhbGlkLmApO1xuICAgIH1cbiAgICB0aGlzLnJvd0NvdW50ID0gY291bnQ7XG4gICAgdGhpcy5tYWtlR3JpZCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBEZWNyZW1lbnQgdGhlIGdyaWQgY29sdW1uIGNvdW50XG4gICAqIEByZXR1cm5zIHthbnl9IFRoZSBuZXcgY29sdW1uIGNvdW50IG9yIGFuIEVycm9yIG9iamVjdCBJZiBjdXJyZW50IHZhbHVlIGlzIGF0IHRoZVxuICAgKiBtYXhpbXVtIGNvbHVtbiBjb3VudC5cbiAgICogQG1lbWJlcm9mIEdyaWRcbiAgICovXG4gIGRlY3JDb2x1bW5Db3VudCgpIHtcbiAgICBpZiAodGhpcy5jb2x1bW5Db3VudCA9PT0gdGhpcy5taW5Db2x1bW5Db3VudCkge1xuICAgICAgcmV0dXJuIG5ldyBFcnJvcihgTWluaW11bSByb3cgbGltaXQgb2YgJHt0aGlzLm1pbkNvbHVtbkNvdW50fSBhbHJlYWR5IHJlYWNoZWQuYCk7XG4gICAgfVxuICAgIHRoaXMuY29sdW1uQ291bnQgLT0gMTtcbiAgICB0aGlzLm1ha2VHcmlkKCk7XG4gICAgcmV0dXJuIHRoaXMuY29sdW1uQ291bnQ7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uIEluY3JlbWVudCB0aGUgZ3JpZCBjb2x1bW4gY291bnRcbiAgICogQHJldHVybnMge2FueX0gVGhlIG5ldyBjb2x1bW4gY291bnQgb3IgYW4gRXJyb3Igb2JqZWN0IElmIGN1cnJlbnQgdmFsdWUgaXMgYXQgdGhlXG4gICAqIG1heGltdW0gY29sdW1uIGNvdW50LlxuICAgKiBAbWVtYmVyb2YgR3JpZFxuICAgKi9cbiAgaW5jckNvbHVtbkNvdW50KCkge1xuICAgIGlmICh0aGlzLmNvbHVtbkNvdW50ID09PSB0aGlzLm1heENvbHVtbkNvdW50KSB7XG4gICAgICByZXR1cm4gbmV3IEVycm9yKGBNYXhpbXVtIHJvdyBsaW1pdCBvZiAke3RoaXMubWF4Q29sdW1uQ291bnR9IGFscmVhZHkgcmVhY2hlZC5gKTtcbiAgICB9XG4gICAgdGhpcy5jb2x1bW5Db3VudCArPSAxO1xuICAgIHRoaXMubWFrZUdyaWQoKTtcbiAgICByZXR1cm4gdGhpcy5jb2x1bW5Db3VudDtcbiAgfVxuICBcbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBEZWNyZW1lbnQgdGhlIGdyaWQgcm93IGNvdW50XG4gICAqIEByZXR1cm5zIHthbnl9IFRoZSBuZXcgcm93IGNvdW50IG9yIGFuIEVycm9yIG9iamVjdCBJZiBjdXJyZW50IHZhbHVlIGlzIGF0IHRoZVxuICAgKiBtaW5pbXVtIHJvdyBjb3VudC5cbiAgICogQG1lbWJlcm9mIEdyaWRcbiAgICovXG4gIGRlY3JSb3dDb3VudCgpIHtcbiAgICBpZiAodGhpcy5yb3dDb3VudCA9PT0gdGhpcy5taW5Sb3dDb3VudCkge1xuICAgICAgcmV0dXJuIG5ldyBFcnJvcihgTWluaW11bSByb3cgbGltaXQgb2YgJHt0aGlzLm1heFJvd0NvdW50fSBhbHJlYWR5IHJlYWNoZWQuYCk7XG4gICAgfVxuICAgIHRoaXMucm93Q291bnQgLT0gMTtcbiAgICB0aGlzLm1ha2VHcmlkKCk7XG4gICAgcmV0dXJuIHRoaXMucm93Q291bnQ7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uIEluY3JlbWVudCB0aGUgZ3JpZCByb3cgY291bnRcbiAgICogQHJldHVybnMge2FueX0gVGhlIG5ldyBjb2x1bW4gY291bnQgb3IgYW4gRXJyb3Igb2JqZWN0IElmIGN1cnJlbnQgdmFsdWUgaXMgYXQgdGhlXG4gICAqIG1heGltdW0gcm93IGNvdW50LlxuICAgKiBAbWVtYmVyb2YgR3JpZFxuICAgKi9cbiAgaW5jclJvd0NvdW50KCkge1xuICAgIGlmICh0aGlzLnJvd0NvdW50ID09PSB0aGlzLm1heFJvd0NvdW50KSB7XG4gICAgICByZXR1cm4gbmV3IEVycm9yKGBNYXhpbXVtIHJvdyBsaW1pdCBvZiAke3RoaXMubWF4Um93Q291bnR9IGFscmVhZHkgcmVhY2hlZC5gKTtcbiAgICB9XG4gICAgdGhpcy5yb3dDb3VudCArPSAxO1xuICAgIHRoaXMubWFrZUdyaWQoKTtcbiAgICByZXR1cm4gdGhpcy5yb3dDb3VudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb24gQ2xlYXIgdGhlIGN1cnJlbnQgZ3JpZFxuICAgKiBAbWVtYmVyb2YgR3JpZFxuICAgKi9cbiAgY2xlYXJHcmlkKCkge1xuICAgIGZvciAobGV0IHJvd05vID0gMDsgcm93Tm8gPCB0aGlzLnJvd0NvdW50OyByb3dObysrKSB7XG4gICAgICB0aGlzLmdyaWRbcm93Tm9dID0gbmV3IEFycmF5KHRoaXMuY29sdW1uQ291bnQpO1xuICAgICAgZm9yIChsZXQgY29sdW1uTm8gPSAwOyBjb2x1bW5ObyA8IHRoaXMuY29sdW1uQ291bnQ7IGNvbHVtbk5vKyspIHtcbiAgICAgICAgdGhpcy5ncmlkW3Jvd05vXVtjb2x1bW5Ob10gPSB0aGlzLmRlZmF1bHRHcmlkQ2VsbENvbG9yO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLm1ha2VHcmlkKCk7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uIFJlbmRlciB0aGUgZ3JpZCBieSBnZW5lcmF0aW5nIGFuZCBhZGRpbmcgYSBuZXcgRE9NIGVsZW1lbnQgZm9yXG4gICAqIGVhY2ggY2VsbCBpbiB0aGUgZ3JpZC5cbiAgICogQG1lbWJlcm9mIEdyaWRcbiAgICovXG4gIG1ha2VHcmlkKCkge1xuICAgIGNvbnN0IGdyaWRDZWxsVGVtcGxhdGUgPSAnPGRpdiBjbGFzcz1cImRlc2lnbi1ncmlkLWNlbGxcIj48L2Rpdj4nO1xuICAgIGxldCBncmlkQ2VsbEVsZW1lbnRzID0gJyc7XG4gICAgZm9yIChsZXQgcm93Tm8gPSAwOyByb3dObyA8IHRoaXMucm93Q291bnQ7IHJvd05vKyspIHtcbiAgICAgIGZvciAobGV0IGNvbHVtbk5vID0gMDsgY29sdW1uTm8gPCB0aGlzLmNvbHVtbkNvdW50OyBjb2x1bW5ObysrKSB7XG4gICAgICAgIGdyaWRDZWxsRWxlbWVudHMgKz0gZ3JpZENlbGxUZW1wbGF0ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgYXBwV2luZG93ID0gbmV3IEFwcFdpbmRvdygpO1xuICAgIGFwcFdpbmRvdy5zZXRDc3NWYXJpYWJsZSgnZGVzaWduR3JpZENvbHVtbkNvdW50JywgdGhpcy5jb2x1bW5Db3VudCk7XG4gICAgYXBwV2luZG93LnNldENzc1ZhcmlhYmxlKCdkZXNpZ25HcmlkUm93Q291bnQnLCB0aGlzLnJvd0NvdW50KTtcbiAgICAkKCBcIi5kZXNpZ24tZ3JpZFwiICkuZW1wdHkoKTtcbiAgICAkKCBcIi5kZXNpZ24tZ3JpZFwiICkuYXBwZW5kKCBncmlkQ2VsbEVsZW1lbnRzICk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgR3JpZDtcbiIsImNsYXNzIFBhbGV0dGUge1xuICAvKipcbiAgICogQGRlc2NyaXB0aW9uIFBhbGV0dGUgY29uc3RydWN0b3IgaW5pdGlhbGl6ZXMgYSBuZXcgUGFsZXR0ZSBvYmplY3RcbiAgICogQG1lbWJlcm9mIEdyaWRcbiAgICovXG4gIGNvbnN0cnVjdG9yKGNvbHVtbkNvdW50LCByb3dDb3VudCkge1xuICAgIHRoaXMuZGVmYXVsdENvbG9yID0gJ3JnYigwLCAwLCAyMzIpJztcbiAgICB0aGlzLm5ld0NvbG9yID0gdGhpcy5kZWZhdWx0Q29sb3I7XG4gICAgdGhpcy5jdXJyZW50Q29sb3IgPSB0aGlzLmRlZmF1bHRDb2xvcjtcbiAgICB0aGlzLm5ld0NvbG9yU2hhZGVzID0gdGhpcy5jcmVhdGVTaGFkZXModGhpcy5uZXdDb2xvcik7XG4gICAgdGhpcy5jdXJyZW50Q29sb3JTaGFkZXMgPSB0aGlzLmNyZWF0ZVNoYWRlcyh0aGlzLmN1cnJlbnRDb2xvcik7XG4gICAgdGhpcy5yZWNlbnRDb2xvcnMgPSB0aGlzLmNyZWF0ZVNoYWRlcyh0aGlzLmN1cnJlbnRDb2xvcik7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uIEdlbmVyYXRlIGFuIGFycmF5IG9mIGZpdmUgc2hhZGVzIG9mIHRoZSBwcm92aWRlZCBjb2xvciB1c2luZyBlcXVhbFxuICAgKiBhbW91bnRzIG9mIHBvd2VyIHRvIGFsbCBvZiB0aGUgbGlnaHQgc291cmNlcy5cbiAgICogQHBhcmFtIHthbnl9IGNvbG9yIEEgc3RyaW5nIGZvcm1hdHRlZCBhcyAncmdiKG5ubixubm4sbm5uKScgd2hlcmUgJ25ubicgaXMgYVxuICAgKiB2YWx1ZSBmcm9tIDAtMjU1IHJlcHJlc2VudGluZyB0aGUgcmVkLCBncmVlbiwgYW5kIGJsdWUgY29sb3IgdmFsdWUuXG4gICAqIEByZXR1cm5zIHtbU3RyaW5nXX0gQXJyYXkgb2YgZml2ZSBzaGFkZSB2YWx1ZXMgYmFzZWQgb24gdGhlIHByb3ZpZGVkIGNvbG9yXG4gICAqIEBtZW1iZXJvZiBQYWxldHRlXG4gICAqL1xuICBjcmVhdGVTaGFkZXMoY29sb3IpIHtcbiAgICAvLyBUT0RPOiBWYWxpZGF0ZSBpbnB1dCBwYXJhbWV0ZXJcbiAgICBjb25zdCBub09mU2hhZGVzID0gNjtcbiAgICBjb25zdCBzdGVwID0gcGFyc2VJbnQoMjU2IC8gbm9PZlNoYWRlcywgMTApO1xuICAgIGxldCBzaGFkZXMgPSBbXTtcbiAgICBsZXQgW3JlZCwgZ3JlZW4sIGJsdWVdID0gY29sb3Iuc3BsaXQoJ3JnYignKVsxXS5zcGxpdCgnKScpWzBdLnNwbGl0KCcsJyk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vT2ZTaGFkZXM7IGkrKykge1xuICAgICAgcmVkID0gcGFyc2VJbnQocmVkLCAxMCkgKyBzdGVwO1xuICAgICAgZ3JlZW4gPSBwYXJzZUludChncmVlbiwgMTApICsgc3RlcDtcbiAgICAgIGJsdWUgPSBwYXJzZUludChibHVlLCAxMCkgKyBzdGVwO1xuICAgICAgYmx1ZSA9IGJsdWUgPiAyNTUgPyAyNTUgOiBibHVlO1xuICAgICAgc2hhZGVzLnB1c2goYHJnYigke3JlZH0sICR7Z3JlZW59LCAke2JsdWV9KWApO1xuICAgIH1cbiAgICByZXR1cm4gc2hhZGVzLnJldmVyc2UoKTtcbiAgfVxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uIFJldHJpZXZlIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgY29sb3JcbiAgICogQHJldHVybnMge1N0cmluZ30gQSBzdHJpbmcgZm9ybWF0dGVkIGFzICdyZ2Iobm5uLG5ubixubm4pJyB3aGVyZSAnbm5uJyBpcyBhXG4gICAqIHZhbHVlIGZyb20gMC0yNTUgcmVwcmVzZW50aW5nIHRoZSByZWQsIGdyZWVuLCBhbmQgYmx1ZSBjb2xvciB2YWx1ZS5cbiAgICogQG1lbWJlcm9mIFBhbGV0dGVcbiAgICovXG4gIGdldEN1cnJlbnRDb2xvcigpIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50Q29sb3I7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uIFJldHJpZXZlIGEgY29sb3IgZnJvbSB0aGUgcmVjZW50bHkgdXNlZCBjb2xvcnMgYXJyYXkuIFxuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXggVGhlIHBvc2l0aW9uIG9mIHRoZSBjb2xvciBpbiB0aGUgcmVjZW50bHkgdXNlZCBhcnJheSwgXG4gICAqIHdoZXJlIDAgcmVwcmVzZW50cyB0aGUgbW9zdCByZWNlbnRseSB1c2VkIGNvbG9yLlxuICAgKiBAcmV0dXJucyAge1N0cmluZ30gQSBzdHJpbmcgZm9ybWF0dGVkIGFzICdyZ2Iobm5uLG5ubixubm4pJyB3aGVyZSAnbm5uJyBpcyBhXG4gICAgICogdmFsdWUgZnJvbSAwLTI1NSByZXByZXNlbnRpbmcgdGhlIHJlZCwgZ3JlZW4sIGFuZCBibHVlIGNvbG9yIHZhbHVlLlxuICAgKiBAbWVtYmVyb2YgUGFsZXR0ZVxuICAgKi9cbiAgZ2V0UmVjZW50Q29sb3IoaW5kZXgpIHtcbiAgICByZXR1cm4gKGluZGV4ID49IDAgJiYgaW5kZXggPD0gdGhpcy5yZWNlbnRDb2xvcnMubGVuZ3RoKSBcbiAgICAgID8gdGhpcy5yZWNlbnRDb2xvcnNbaW5kZXhdIFxuICAgICAgOiBuZXcgRXJyb3IoYFJlY2VudCBjb2xvciBpbmRleCBtdXN0IGJlIGJldHdlZW4gMCBhbmQgJHt0aGlzLnJlY2VudENvbG9ycy5sZW5ndGh9LiAke2luZGV4fSB3YXMgcGFzc2VkLmApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBSZXRyaWV2ZSBhbmQgYXJyYXkgY29udGFpbmluZyB0aGUgc2hhZGVzIG9mIHRoZSBjdXJyZW50IGNvbG9yXG4gICAqIEByZXR1cm5zICB7W1N0cmluZ119IEFycmF5IG9mIGZpdmUgc2hhZGUgdmFsdWVzIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBjb2xvclxuICAgKiBAbWVtYmVyb2YgUGFsZXR0ZVxuICAgKi9cbiAgZ2V0U2hhZGVzKCkge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRDb2xvclNoYWRlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb24gUmVuZGVyIHRoZSBhcnJheSBvZiByZWNlbnRseSB1c2VkIGNvbG9ycyBvbnRvIHRoZSBIVE1MIHBhZ2VcbiAgICogQHBhcmFtIHtbU3RyaW5nXX0gY29sb3JBcnJheSBBcnJheSBvZiBjb2xvcnMgcmVwcmVzZW50aW5nIHRoZSBtb3N0IHJlY2VudGx5IHVzZWQgY29sb3JzLlxuICAgKiBAbWVtYmVyb2YgUGFsZXR0ZVxuICAgKi9cbiAgcmVuZGVyUmVjZW50Q29sb3JzKGNvbG9yQXJyYXkpIHtcbiAgICAvLyBUT0RPOiBWYWxpZGF0ZSB0aGUgaW5wdXQgcGFyYW1ldGVyXG4gICAgY29sb3JBcnJheS5mb3JFYWNoKChlbGVtZW50LCBpbmRleCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coYHJlbmRlclJlY2VudENvbG9ycyAtIGluZGV4OiAke2luZGV4fSBlbGVtZW50OiAke2VsZW1lbnR9YCk7XG4gICAgICAkKCBcIiNyZWNlbnQtY29sb3ItXCIgKyBpbmRleCApLmNzcygnYmFja2dyb3VuZC1jb2xvcicsZWxlbWVudCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uIFVwZGF0ZSB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGNvbG9yIHRvIGEgbmV3IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBjb2xvciBBIHN0cmluZyBmb3JtYXR0ZWQgYXMgJ3JnYihubm4sbm5uLG5ubiknIHdoZXJlICdubm4nIGlzIGFcbiAgICogdmFsdWUgZnJvbSAwLTI1NSByZXByZXNlbnRpbmcgdGhlIHJlZCwgZ3JlZW4sIGFuZCBibHVlIGNvbG9yIHZhbHVlLlxuICAgKiBAbWVtYmVyb2YgUGFsZXR0ZVxuICAgKi9cbiAgc2V0Q3VycmVudENvbG9yKGNvbG9yKSB7XG4gICAgLy8gVE9ETzogVmFsaWRhdGUgdGhlIGlucHV0IHBhcmFtZXRlclxuICAgIGNvbnNvbGUubG9nKGBzZXRDdXJyZW50Q29sb3IgLSBjb2xvcjogJHtjb2xvcn1gKTtcbiAgICB0aGlzLmN1cnJlbnRDb2xvciA9IGNvbG9yO1xuICAgICQoIFwiLmNvbG9yLXNlbGVjdG9yLWJ1dHRvblwiICkuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJyxjb2xvcik7XG4gICAgdGhpcy51cGRhdGVSZWNlbnRDb2xvcnMoY29sb3IpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBVcGRhdGUgdGhlIHJlY2VudCBjb2xvcnMgYXJyYXkgc28gdGhlIG1vc3QgcmVjZW50bHkgdXNlZCBjb2xvciBcbiAgICogb2NjdXBpZXMgcG9zaXRpb24gMCBpbiB0aGUgYXJyYXkuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBjb2xvciBBIHN0cmluZyBmb3JtYXR0ZWQgYXMgJ3JnYihubm4sbm5uLG5ubiknIHdoZXJlICdubm4nIGlzIGFcbiAgICogdmFsdWUgZnJvbSAwLTI1NSByZXByZXNlbnRpbmcgdGhlIHJlZCwgZ3JlZW4sIGFuZCBibHVlIGNvbG9yIHZhbHVlLlxuICAgKiBAbWVtYmVyb2YgUGFsZXR0ZVxuICAgKi9cbiAgdXBkYXRlUmVjZW50Q29sb3JzKGNvbG9yKSB7XG4gICAgY29uc3QgY29sb3JJbmRleCA9IHRoaXMucmVjZW50Q29sb3JzLmluZGV4T2YoY29sb3IpO1xuICAgIGNvbnNvbGUubG9nKGB1cGRhdGVSZWNlbnRDb2xvcnMgLSBjb2xvcjogJHtjb2xvcn0gY29sb3JJbmRleDogJHtjb2xvckluZGV4fWApO1xuICAgIGlmIChjb2xvckluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIElmIHRoZSBjb2xvciBoYXNuJ3QgYmVlbiByZWNlbnRseSB1c2VkIHJlbW92ZSB0aGUgbGFzdCBlbGVtZW50IGFuZCB0aGVuIHB1c2hcbiAgICAgIC8vIGl0IG9udG8gdGhlIGFycmF5XG4gICAgICB0aGlzLnJlY2VudENvbG9ycy5zcGxpY2UodGhpcy5yZWNlbnRDb2xvcnMubGVuZ3RoLTEsIDEpO1xuICAgICAgdGhpcy5yZWNlbnRDb2xvcnMucHVzaChjb2xvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElmIHRoZSBjb2xvciBpcyBhbHJlYWR5IGluIHRoZSBhcnJheSByZW1vdmUgaXQgYW5kIHB1c2ggaXQgYmFjayBvbnRvIHRoZSBhcnJheVxuICAgICAgLy8gc28gaXQgb2NjdXBpZXMgcG9zaXRpb24gMFxuICAgICAgY29uc29sZS5sb2coYFN0YXJ0aW5nIGNvbG9ySW5kZXg6ICR7Y29sb3JJbmRleH0gcmVjZW50Q29sb3JzOiAke3RoaXMucmVjZW50Q29sb3JzfWApO1xuICAgICAgY29uc3QgZGVsZXRlZENvbG9ycyA9IHRoaXMucmVjZW50Q29sb3JzLnNwbGljZShjb2xvckluZGV4LCAxKTtcbiAgICAgIGNvbnNvbGUubG9nKGB1cGRhdGVSZWNlbnRDb2xvcnMgLSBkZWxldGVkQ29sb3JzOiAke2RlbGV0ZWRDb2xvcnN9IHJlY2VudENvbG9yczogJHt0aGlzLnJlY2VudENvbG9yc31gKTtcbiAgICAgIHRoaXMucmVjZW50Q29sb3JzLnB1c2goY29sb3IpO1xuICAgICAgY29uc29sZS5sb2coYEVuZGluZyByZWNlbnRDb2xvcnM6ICR7dGhpcy5yZWNlbnRDb2xvcnN9YCk7XG4gICAgfVxuICAgIHRoaXMucmVuZGVyUmVjZW50Q29sb3JzKHRoaXMucmVjZW50Q29sb3JzKTtcbiAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IFBhbGV0dGU7XG4iLCJpbXBvcnQgQXBwV2luZG93IGZyb20gJy4uL2NsYXNzZXMvQXBwV2luZG93JztcbmltcG9ydCBHcmlkIGZyb20gJy4uL2NsYXNzZXMvR3JpZCc7XG5pbXBvcnQgUGFsZXR0ZSBmcm9tICcuLi9jbGFzc2VzL1BhbGV0dGUnO1xuXG5sZXQgZGVzaWduR3JpZCA9IG51bGw7XG5sZXQgY29sb3JQYWxldHRlID0gbnVsbDtcbmNvbnN0IGFwcFdpbmRvdyA9IG5ldyBBcHBXaW5kb3coKTtcblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gIGNvbnNvbGUuY2xlYXIoKTtcblxuICAvLyBDcmVhdGUgZXZlbnQgaGFuZGxlcnMgZm9yIHRoZSBtYWluIGFwcCBidXR0b25zXG4gICQoXCIjY2xlYXItZ3JpZC1idG5cIikuY2xpY2soKGV2ZW50KSA9PiB7XG4gICAgZGVzaWduR3JpZC5jbGVhckdyaWQoKTtcbiAgfSk7XG4gIFxuICAvLyBSZW5kZXIgdGhlIGNvbG9yIGNob29zZXIgY29udHJvbCBhbmQgY3JlYXRlIGl0cyBldmVudCBoYW5kbGVyc1xuICBjb2xvclBhbGV0dGUgPSBuZXcgUGFsZXR0ZSgpO1xuICBjb2xvclBhbGV0dGUucmVuZGVyUmVjZW50Q29sb3JzKGNvbG9yUGFsZXR0ZS5nZXRTaGFkZXMoKSk7XG4gIC8qXG4gIGNvbG9yUGFsZXR0ZS5nZXRTaGFkZXMoKS5mb3JFYWNoKChlbGVtZW50LCBpbmRleCkgPT4ge1xuICAgICQoIFwiI3JlY2VudC1jb2xvci1cIiArIGluZGV4ICkuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJyxlbGVtZW50KTtcbiAgfSk7XG4gICovXG4gIGNvbG9yUGFsZXR0ZS5yZW5kZXJSZWNlbnRDb2xvcnMoY29sb3JQYWxldHRlLmdldFNoYWRlcygpKTtcbiAgJCggXCIucmVjZW50LWNvbG9yLXdyYXBwZXJcIiApLm9uKCAnY2xpY2snLCAnLnJlY2VudC1jb2xvcicsIGZ1bmN0aW9uKCkge1xuICAgIGNvbG9yUGFsZXR0ZS5zZXRDdXJyZW50Q29sb3IoJCh0aGlzKS5jc3MoJ2JhY2tncm91bmQtY29sb3InKSk7XG4gIH0pO1xuXG4gIC8vIFJlbmRlciB0aGUgZGVzaWduIGdyaWQgYW5kIGl0cyBldmVudCBoYW5kbGVyc1xuICBkZXNpZ25HcmlkID0gbmV3IEdyaWQoXG4gICAgYXBwV2luZG93LmdldENzc1ZhcmlhYmxlKCdkZXNpZ25HcmlkUm93Q291bnQnLCAnbnVtYmVyJyksIFxuICAgIGFwcFdpbmRvdy5nZXRDc3NWYXJpYWJsZSgnZGVzaWduR3JpZENvbHVtbkNvdW50JywgJ251bWJlcicpXG4gICk7XG4gIGRlc2lnbkdyaWQubWFrZUdyaWQoKTtcblxuICAvLyBDcmVhdGUgYSBkZWxlZ2F0ZWQgZXZlbnQgaGFuZGxlciBvbiB0aGUgRGVzaWduIEdyaWQuXG4gICQoIFwiLmRlc2lnbi1ncmlkXCIgKS5vbiggXCJjbGlja1wiLCBcIi5kZXNpZ24tZ3JpZC1jZWxsXCIsIGZ1bmN0aW9uKCkge1xuICAgICQodGhpcykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJyxjb2xvclBhbGV0dGUuZ2V0Q3VycmVudENvbG9yKCkpO1xuICB9KTtcblxuICAkKCcuY29sdW1uLWNvdW50JykuY2hhbmdlKCgpID0+IHsgXG4gICAgZGVzaWduR3JpZC5zZXRDb2x1bW5Db3VudCgkKCcjY29sdW1uLWNvdW50LWJveCcpLnZhbCgpKTtcbiAgfSk7XG5cbiAgJChcIi5jb2x1bW4tbWludXNcIikuY2xpY2soKGV2ZW50KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGRlc2lnbkdyaWQuZGVjckNvbHVtbkNvdW50KCk7XG4gICAgICAkKCcjY29sdW1uLWNvdW50LWJveCcpLnZhbChkZXNpZ25HcmlkLmdldENvbHVtbkNvdW50KCkpO1xuICAgIH1cbiAgICBjYXRjaChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coYEVycm9yIGRlY3JlbWVudGluZyBjb2x1bW4gY291bnQuIGVycm9yOiR7ZXJyb3J9YCk7XG4gICAgfVxuICB9KTtcblxuICAkKFwiLmNvbHVtbi1wbHVzXCIpLmNsaWNrKChldmVudCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBkZXNpZ25HcmlkLmluY3JDb2x1bW5Db3VudCgpO1xuICAgICAgJCgnI2NvbHVtbi1jb3VudC1ib3gnKS52YWwoZGVzaWduR3JpZC5nZXRDb2x1bW5Db3VudCgpKTtcbiAgICB9XG4gICAgY2F0Y2goZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBpbmNyZW1lbnRpbmcgY29sdW1uIGNvdW50LiBlcnJvcjoke2Vycm9yfWApO1xuICAgIH1cbiAgfSk7XG5cbiAgJCgnLnJvdy1jb3VudCcpLmNoYW5nZSgoKSA9PiB7IFxuICAgIGRlc2lnbkdyaWQuc2V0Um93Q291bnQoJCgnI3Jvdy1jb3VudC1ib3gnKS52YWwoKSk7XG4gIH0pOyAgXG5cbiAgJChcIi5yb3ctbWludXNcIikuY2xpY2soKGV2ZW50KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGRlc2lnbkdyaWQuZGVjclJvd0NvdW50KCk7XG4gICAgICAkKCcjcm93LWNvdW50LWJveCcpLnZhbChkZXNpZ25HcmlkLmdldFJvd0NvdW50KCkpO1xuICAgIH1cbiAgICBjYXRjaChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coYEVycm9yIGRlY3JlbWVudGluZyByb3cgY291bnQuIGVycm9yOiR7ZXJyb3J9YCk7XG4gICAgfVxuICB9KTtcblxuICAkKFwiLnJvdy1wbHVzXCIpLmNsaWNrKChldmVudCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBkZXNpZ25HcmlkLmluY3JSb3dDb3VudCgpO1xuICAgICAgJCgnI3Jvdy1jb3VudC1ib3gnKS52YWwoZGVzaWduR3JpZC5nZXRSb3dDb3VudCgpKTtcbiAgICB9XG4gICAgY2F0Y2goZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBpbmNyZW1lbnRpbmcgcm93IGNvdW50LiBlcnJvcjoke2Vycm9yfWApO1xuICAgIH1cbiAgfSk7XG5cbn0pO1xuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLE1BQU0sU0FBUyxDQUFDOzs7Ozs7RUFNZCxjQUFjLENBQUMsVUFBVSxFQUFFLE9BQU8sRUFBRTtJQUNsQyxNQUFNLFVBQVUsR0FBRyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLGFB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
