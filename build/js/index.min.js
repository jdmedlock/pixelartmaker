(function () {
'use strict';

class AppWindow {
  /**
   * @description Get the value associated with the named CSS variable
   * @returns {any} cssVarName - CSS variable type
   * @memberof AppWindow
   */
  getCssVariable(cssVarName, varType) {
    const htmlStyles = window.getComputedStyle(document.querySelector('html'));
    const rawValue = htmlStyles.getPropertyValue('--' + cssVarName);
    let varValue = null;
    switch (varType) {
      case 'number':
        varValue = parseInt(rawValue);
        break;
      case 'string':
        varValue = String.toString(rawValue);
        break;
      default: 
        throw new Error(`getCssVariable: unknown value type of ${valueType} /
          encountered`);
    }
    return varValue;
  }
  
  /**
   * @description Set the value of a CSS variable
   * @param {String} cssVarName - Name of the CSS variable to update
   * @param {any} varValue - Value to be assigned to the CSS variable
   * @memberof AppWindow
   */
  setCssVariable(cssVarName, varValue) {
    document.documentElement.style.setProperty('--' + cssVarName, varValue);
  }
}

class Grid {
  /**
   * @description Grid constructor initializes a new Grid given its dimensions.
   * @param {Integer} columnCount - Number of columns in the grid
   * @param {Integer} rowCount - Number of rows in the grid
   * @memberof Grid
   */
  constructor(columnCount, rowCount) {
    // Validate the input parameters
    if (isNaN(columnCount)) {
      return new Error(`Column count is not numeric: ${columnCount}.`);
    }
    if (columnCount < 1 || columnCount > 99) {
      return new Error(`Column count must be between 1 and 99, ${columnCount} is invalid.`);
    }

    if (isNaN(rowCount)) {
      return new Error(`Column count is not numeric: ${rowCount}.`);
    }
    if (rowCount < 1 || rowCount > 99) {
      return new Error(`Column count must be between 1 and 99, ${rowCount} is invalid.`);
    }

    // Populate object variables
    this.columnCount = columnCount;
    this.rowCount = rowCount;
    this.minColumnCount = 1;
    this.maxColumnCount = 99;
    this.minRowCount = 1;
    this.maxRowCount = 99;
    this.defaultGridCellColor = 'rgb(232, 232, 232)'; // Light grey #e8e8e8

    // Create a new grid of the dimensions provided as parameters to the
    // constructor call. Initialize each cell to the default cell color.
    this.grid = new Array(this.rowCount);
    for (let rowNo = 0; rowNo < this.rowCount; rowNo++) {
      this.grid[rowNo] = new Array(this.columnCount);
      for (let columnNo = 0; columnNo < this.columnCount; columnNo++) {
        this.grid[rowNo][columnNo] = this.defaultGridCellColor;
      }
    }
  }
  
/*
  /**
   * @description Return a JSON representation of the design grid
   * @returns {Object} JSON object defining the current design grid
   * @readonly
   * @memberof Grid
   * /
  get grid() {
    return JSON.stringify(this._grid);
  }
  /**
   * @description Populate the design grid from a JSON object
   * @memberof Grid
   * /
  set grid(gridObject) {
    this._grid = JSON.parse(gridObject);
  }
*/

  /**
   * @description Get the current number of columns in the grid.
   * @returns {Integer} - Number of columns in the grid
   * @readonly
   * @memberof Grid
   */
  getColumnCount() {
    return this.columnCount;
  }

  /**
   * @description Update the number of grid columns
   * @param {Integer} count - Column count
   * @memberof Grid
   */
  setColumnCount(count) {
    if (isNaN(count)) {
      return new Error(`Column count is not numeric: ${count}.`);
    }
    if (count < 1 || count > 99) {
      return new Error(`Column count must be between 1 and 99, ${count} is invalid.`);
    }
    this._columnCount = count;
    // TODO: Adjust grid
  }

  /**
   * @description Get the current number of rows in the grid.
   * @returns {Integer} - Number of rows in the grid
   * @readonly
   * @memberof Grid
   */
  getRowCount() {
    return this.rowCount;
  }

  /**
   * @description Update the number of grid rows
   * @param {Integer} count - Row count
   * @memberof Grid
   */
  setRowCount(count) {
    if (isNaN(count)) {
      return new Error(`Row count is not numeric: ${count}.`);
    }
    if (count < 1 || count > 99) {
      return new Error(`Row count must be between 1 and 99, ${count} is invalid.`);
    }
    this._rowCount = count;
    // TODO: Adjust grid
  }

  /**
   * @description Decrement the grid column count
   * @returns {Error} If current value is at the minimum column count.
   * @memberof Grid
   */
  decrColumnCount() {
    if (this.columnCount === this.minColumnCount) {
      return new Error(`Minimum row limit of ${this.minColumnCount} already reached.`);
    }
    this.columnCount -= 1;
    // TODO: Adjust grid
  }

  /**
   * @description Increment the grid column count
   * @returns {Error} If current value is at the maximum column count.
   * @memberof Grid
   */
  incrColumnCount() {
    if (this._columnCount === this.maxColumnCount) {
      return new Error(`Maximum row limit of ${this.maxColumnCount} already reached.`);
    }
    this.columnCount += 1;
    // TODO: Adjust grid
  }
  
  /**
   * @description Decrement the grid row count
   * @returns  
   * @memberof Grid
   */
  decrRowCount() {
    console.log('I made it!');
    if (this._rowCount === this.minRowCount) {
      return new Error(`Minimum row limit of ${this.maxRowCount} already reached.`);
    }
    this.rowCount -= 1;
    // TODO: Adjust grid
  }

  /**
   * @description Increment the grid row count
   * @returns {Error} If maximum row count is exceeded.
   * @memberof Grid
   */
  incrRowCount() {
    if (this._rowCount === this.maxRowCount) {
      return new Error(`Maximum row limit of ${this.maxRowCount} already reached.`);
    }
    this.rowCount += 1;
    // TODO: Adjust grid
  }
  /**
   * @description Render the grid by generating and adding a new DOM element for
   * each cell in the grid.
   * @memberof Grid
   */
  makeGrid() {
    const gridCellTemplate = '<div class="design-grid-cell"></div>';
    let gridCellElements = '';
    for (let rowNo = 0; rowNo < this.rowCount; rowNo++) {
      for (let columnNo = 0; columnNo < this.columnCount; columnNo++) {
        gridCellElements += gridCellTemplate;
      }
    }
    $( ".design-grid" ).append( gridCellElements );
  }
}

let designGrid = null;
const appWindow = new AppWindow();

$(document).ready(function() {
  console.clear();

  designGrid = new Grid(
    appWindow.getCssVariable('designGridRowCount', 'number'), 
    appWindow.getCssVariable('designGridColumnCount', 'number')
  );

  console.log(designGrid);
  designGrid.makeGrid();

  // Create a button handler for the on/off button
  $(".row-minus").click((event) => {
      console.log(`Intercepted row minus click. event: ${event}`);
      designGrid.decrRowCount();
  });

});

}());
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXgubWluLmpzIiwic291cmNlcyI6WyIuLi8uLi9zcmMvY2xhc3Nlcy9BcHBXaW5kb3cuanMiLCIuLi8uLi9zcmMvY2xhc3Nlcy9HcmlkLmpzIiwiLi4vLi4vc3JjL2hvbWUvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQXBwV2luZG93IHtcbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBHZXQgdGhlIHZhbHVlIGFzc29jaWF0ZWQgd2l0aCB0aGUgbmFtZWQgQ1NTIHZhcmlhYmxlXG4gICAqIEByZXR1cm5zIHthbnl9IGNzc1Zhck5hbWUgLSBDU1MgdmFyaWFibGUgdHlwZVxuICAgKiBAbWVtYmVyb2YgQXBwV2luZG93XG4gICAqL1xuICBnZXRDc3NWYXJpYWJsZShjc3NWYXJOYW1lLCB2YXJUeXBlKSB7XG4gICAgY29uc3QgaHRtbFN0eWxlcyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2h0bWwnKSk7XG4gICAgY29uc3QgcmF3VmFsdWUgPSBodG1sU3R5bGVzLmdldFByb3BlcnR5VmFsdWUoJy0tJyArIGNzc1Zhck5hbWUpO1xuICAgIGxldCB2YXJWYWx1ZSA9IG51bGw7XG4gICAgc3dpdGNoICh2YXJUeXBlKSB7XG4gICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICB2YXJWYWx1ZSA9IHBhcnNlSW50KHJhd1ZhbHVlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICB2YXJWYWx1ZSA9IFN0cmluZy50b1N0cmluZyhyYXdWYWx1ZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDogXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgZ2V0Q3NzVmFyaWFibGU6IHVua25vd24gdmFsdWUgdHlwZSBvZiAke3ZhbHVlVHlwZX0gL1xuICAgICAgICAgIGVuY291bnRlcmVkYCk7XG4gICAgfVxuICAgIHJldHVybiB2YXJWYWx1ZTtcbiAgfVxuICBcbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBTZXQgdGhlIHZhbHVlIG9mIGEgQ1NTIHZhcmlhYmxlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBjc3NWYXJOYW1lIC0gTmFtZSBvZiB0aGUgQ1NTIHZhcmlhYmxlIHRvIHVwZGF0ZVxuICAgKiBAcGFyYW0ge2FueX0gdmFyVmFsdWUgLSBWYWx1ZSB0byBiZSBhc3NpZ25lZCB0byB0aGUgQ1NTIHZhcmlhYmxlXG4gICAqIEBtZW1iZXJvZiBBcHBXaW5kb3dcbiAgICovXG4gIHNldENzc1ZhcmlhYmxlKGNzc1Zhck5hbWUsIHZhclZhbHVlKSB7XG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KCctLScgKyBjc3NWYXJOYW1lLCB2YXJWYWx1ZSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBwV2luZG93OyIsImNsYXNzIEdyaWQge1xuICAvKipcbiAgICogQGRlc2NyaXB0aW9uIEdyaWQgY29uc3RydWN0b3IgaW5pdGlhbGl6ZXMgYSBuZXcgR3JpZCBnaXZlbiBpdHMgZGltZW5zaW9ucy5cbiAgICogQHBhcmFtIHtJbnRlZ2VyfSBjb2x1bW5Db3VudCAtIE51bWJlciBvZiBjb2x1bW5zIGluIHRoZSBncmlkXG4gICAqIEBwYXJhbSB7SW50ZWdlcn0gcm93Q291bnQgLSBOdW1iZXIgb2Ygcm93cyBpbiB0aGUgZ3JpZFxuICAgKiBAbWVtYmVyb2YgR3JpZFxuICAgKi9cbiAgY29uc3RydWN0b3IoY29sdW1uQ291bnQsIHJvd0NvdW50KSB7XG4gICAgLy8gVmFsaWRhdGUgdGhlIGlucHV0IHBhcmFtZXRlcnNcbiAgICBpZiAoaXNOYU4oY29sdW1uQ291bnQpKSB7XG4gICAgICByZXR1cm4gbmV3IEVycm9yKGBDb2x1bW4gY291bnQgaXMgbm90IG51bWVyaWM6ICR7Y29sdW1uQ291bnR9LmApO1xuICAgIH1cbiAgICBpZiAoY29sdW1uQ291bnQgPCAxIHx8IGNvbHVtbkNvdW50ID4gOTkpIHtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoYENvbHVtbiBjb3VudCBtdXN0IGJlIGJldHdlZW4gMSBhbmQgOTksICR7Y29sdW1uQ291bnR9IGlzIGludmFsaWQuYCk7XG4gICAgfVxuXG4gICAgaWYgKGlzTmFOKHJvd0NvdW50KSkge1xuICAgICAgcmV0dXJuIG5ldyBFcnJvcihgQ29sdW1uIGNvdW50IGlzIG5vdCBudW1lcmljOiAke3Jvd0NvdW50fS5gKTtcbiAgICB9XG4gICAgaWYgKHJvd0NvdW50IDwgMSB8fCByb3dDb3VudCA+IDk5KSB7XG4gICAgICByZXR1cm4gbmV3IEVycm9yKGBDb2x1bW4gY291bnQgbXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDk5LCAke3Jvd0NvdW50fSBpcyBpbnZhbGlkLmApO1xuICAgIH1cblxuICAgIC8vIFBvcHVsYXRlIG9iamVjdCB2YXJpYWJsZXNcbiAgICB0aGlzLmNvbHVtbkNvdW50ID0gY29sdW1uQ291bnQ7XG4gICAgdGhpcy5yb3dDb3VudCA9IHJvd0NvdW50O1xuICAgIHRoaXMubWluQ29sdW1uQ291bnQgPSAxO1xuICAgIHRoaXMubWF4Q29sdW1uQ291bnQgPSA5OTtcbiAgICB0aGlzLm1pblJvd0NvdW50ID0gMTtcbiAgICB0aGlzLm1heFJvd0NvdW50ID0gOTk7XG4gICAgdGhpcy5kZWZhdWx0R3JpZENlbGxDb2xvciA9ICdyZ2IoMjMyLCAyMzIsIDIzMiknOyAvLyBMaWdodCBncmV5ICNlOGU4ZThcblxuICAgIC8vIENyZWF0ZSBhIG5ldyBncmlkIG9mIHRoZSBkaW1lbnNpb25zIHByb3ZpZGVkIGFzIHBhcmFtZXRlcnMgdG8gdGhlXG4gICAgLy8gY29uc3RydWN0b3IgY2FsbC4gSW5pdGlhbGl6ZSBlYWNoIGNlbGwgdG8gdGhlIGRlZmF1bHQgY2VsbCBjb2xvci5cbiAgICB0aGlzLmdyaWQgPSBuZXcgQXJyYXkodGhpcy5yb3dDb3VudCk7XG4gICAgZm9yIChsZXQgcm93Tm8gPSAwOyByb3dObyA8IHRoaXMucm93Q291bnQ7IHJvd05vKyspIHtcbiAgICAgIHRoaXMuZ3JpZFtyb3dOb10gPSBuZXcgQXJyYXkodGhpcy5jb2x1bW5Db3VudCk7XG4gICAgICBmb3IgKGxldCBjb2x1bW5ObyA9IDA7IGNvbHVtbk5vIDwgdGhpcy5jb2x1bW5Db3VudDsgY29sdW1uTm8rKykge1xuICAgICAgICB0aGlzLmdyaWRbcm93Tm9dW2NvbHVtbk5vXSA9IHRoaXMuZGVmYXVsdEdyaWRDZWxsQ29sb3I7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIFxuLypcbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBSZXR1cm4gYSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBkZXNpZ24gZ3JpZFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBKU09OIG9iamVjdCBkZWZpbmluZyB0aGUgY3VycmVudCBkZXNpZ24gZ3JpZFxuICAgKiBAcmVhZG9ubHlcbiAgICogQG1lbWJlcm9mIEdyaWRcbiAgICogL1xuICBnZXQgZ3JpZCgpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy5fZ3JpZCk7XG4gIH1cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBQb3B1bGF0ZSB0aGUgZGVzaWduIGdyaWQgZnJvbSBhIEpTT04gb2JqZWN0XG4gICAqIEBtZW1iZXJvZiBHcmlkXG4gICAqIC9cbiAgc2V0IGdyaWQoZ3JpZE9iamVjdCkge1xuICAgIHRoaXMuX2dyaWQgPSBKU09OLnBhcnNlKGdyaWRPYmplY3QpO1xuICB9XG4qL1xuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb24gR2V0IHRoZSBjdXJyZW50IG51bWJlciBvZiBjb2x1bW5zIGluIHRoZSBncmlkLlxuICAgKiBAcmV0dXJucyB7SW50ZWdlcn0gLSBOdW1iZXIgb2YgY29sdW1ucyBpbiB0aGUgZ3JpZFxuICAgKiBAcmVhZG9ubHlcbiAgICogQG1lbWJlcm9mIEdyaWRcbiAgICovXG4gIGdldENvbHVtbkNvdW50KCkge1xuICAgIHJldHVybiB0aGlzLmNvbHVtbkNvdW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBVcGRhdGUgdGhlIG51bWJlciBvZiBncmlkIGNvbHVtbnNcbiAgICogQHBhcmFtIHtJbnRlZ2VyfSBjb3VudCAtIENvbHVtbiBjb3VudFxuICAgKiBAbWVtYmVyb2YgR3JpZFxuICAgKi9cbiAgc2V0Q29sdW1uQ291bnQoY291bnQpIHtcbiAgICBpZiAoaXNOYU4oY291bnQpKSB7XG4gICAgICByZXR1cm4gbmV3IEVycm9yKGBDb2x1bW4gY291bnQgaXMgbm90IG51bWVyaWM6ICR7Y291bnR9LmApO1xuICAgIH1cbiAgICBpZiAoY291bnQgPCAxIHx8IGNvdW50ID4gOTkpIHtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoYENvbHVtbiBjb3VudCBtdXN0IGJlIGJldHdlZW4gMSBhbmQgOTksICR7Y291bnR9IGlzIGludmFsaWQuYCk7XG4gICAgfVxuICAgIHRoaXMuX2NvbHVtbkNvdW50ID0gY291bnQ7XG4gICAgLy8gVE9ETzogQWRqdXN0IGdyaWRcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb24gR2V0IHRoZSBjdXJyZW50IG51bWJlciBvZiByb3dzIGluIHRoZSBncmlkLlxuICAgKiBAcmV0dXJucyB7SW50ZWdlcn0gLSBOdW1iZXIgb2Ygcm93cyBpbiB0aGUgZ3JpZFxuICAgKiBAcmVhZG9ubHlcbiAgICogQG1lbWJlcm9mIEdyaWRcbiAgICovXG4gIGdldFJvd0NvdW50KCkge1xuICAgIHJldHVybiB0aGlzLnJvd0NvdW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBVcGRhdGUgdGhlIG51bWJlciBvZiBncmlkIHJvd3NcbiAgICogQHBhcmFtIHtJbnRlZ2VyfSBjb3VudCAtIFJvdyBjb3VudFxuICAgKiBAbWVtYmVyb2YgR3JpZFxuICAgKi9cbiAgc2V0Um93Q291bnQoY291bnQpIHtcbiAgICBpZiAoaXNOYU4oY291bnQpKSB7XG4gICAgICByZXR1cm4gbmV3IEVycm9yKGBSb3cgY291bnQgaXMgbm90IG51bWVyaWM6ICR7Y291bnR9LmApO1xuICAgIH1cbiAgICBpZiAoY291bnQgPCAxIHx8IGNvdW50ID4gOTkpIHtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoYFJvdyBjb3VudCBtdXN0IGJlIGJldHdlZW4gMSBhbmQgOTksICR7Y291bnR9IGlzIGludmFsaWQuYCk7XG4gICAgfVxuICAgIHRoaXMuX3Jvd0NvdW50ID0gY291bnQ7XG4gICAgLy8gVE9ETzogQWRqdXN0IGdyaWRcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb24gRGVjcmVtZW50IHRoZSBncmlkIGNvbHVtbiBjb3VudFxuICAgKiBAcmV0dXJucyB7RXJyb3J9IElmIGN1cnJlbnQgdmFsdWUgaXMgYXQgdGhlIG1pbmltdW0gY29sdW1uIGNvdW50LlxuICAgKiBAbWVtYmVyb2YgR3JpZFxuICAgKi9cbiAgZGVjckNvbHVtbkNvdW50KCkge1xuICAgIGlmICh0aGlzLmNvbHVtbkNvdW50ID09PSB0aGlzLm1pbkNvbHVtbkNvdW50KSB7XG4gICAgICByZXR1cm4gbmV3IEVycm9yKGBNaW5pbXVtIHJvdyBsaW1pdCBvZiAke3RoaXMubWluQ29sdW1uQ291bnR9IGFscmVhZHkgcmVhY2hlZC5gKTtcbiAgICB9XG4gICAgdGhpcy5jb2x1bW5Db3VudCAtPSAxO1xuICAgIC8vIFRPRE86IEFkanVzdCBncmlkXG4gIH1cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uIEluY3JlbWVudCB0aGUgZ3JpZCBjb2x1bW4gY291bnRcbiAgICogQHJldHVybnMge0Vycm9yfSBJZiBjdXJyZW50IHZhbHVlIGlzIGF0IHRoZSBtYXhpbXVtIGNvbHVtbiBjb3VudC5cbiAgICogQG1lbWJlcm9mIEdyaWRcbiAgICovXG4gIGluY3JDb2x1bW5Db3VudCgpIHtcbiAgICBpZiAodGhpcy5fY29sdW1uQ291bnQgPT09IHRoaXMubWF4Q29sdW1uQ291bnQpIHtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoYE1heGltdW0gcm93IGxpbWl0IG9mICR7dGhpcy5tYXhDb2x1bW5Db3VudH0gYWxyZWFkeSByZWFjaGVkLmApO1xuICAgIH1cbiAgICB0aGlzLmNvbHVtbkNvdW50ICs9IDE7XG4gICAgLy8gVE9ETzogQWRqdXN0IGdyaWRcbiAgfVxuICBcbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBEZWNyZW1lbnQgdGhlIGdyaWQgcm93IGNvdW50XG4gICAqIEByZXR1cm5zICBcbiAgICogQG1lbWJlcm9mIEdyaWRcbiAgICovXG4gIGRlY3JSb3dDb3VudCgpIHtcbiAgICBjb25zb2xlLmxvZygnSSBtYWRlIGl0IScpO1xuICAgIGlmICh0aGlzLl9yb3dDb3VudCA9PT0gdGhpcy5taW5Sb3dDb3VudCkge1xuICAgICAgcmV0dXJuIG5ldyBFcnJvcihgTWluaW11bSByb3cgbGltaXQgb2YgJHt0aGlzLm1heFJvd0NvdW50fSBhbHJlYWR5IHJlYWNoZWQuYCk7XG4gICAgfVxuICAgIHRoaXMucm93Q291bnQgLT0gMTtcbiAgICAvLyBUT0RPOiBBZGp1c3QgZ3JpZFxuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBJbmNyZW1lbnQgdGhlIGdyaWQgcm93IGNvdW50XG4gICAqIEByZXR1cm5zIHtFcnJvcn0gSWYgbWF4aW11bSByb3cgY291bnQgaXMgZXhjZWVkZWQuXG4gICAqIEBtZW1iZXJvZiBHcmlkXG4gICAqL1xuICBpbmNyUm93Q291bnQoKSB7XG4gICAgaWYgKHRoaXMuX3Jvd0NvdW50ID09PSB0aGlzLm1heFJvd0NvdW50KSB7XG4gICAgICByZXR1cm4gbmV3IEVycm9yKGBNYXhpbXVtIHJvdyBsaW1pdCBvZiAke3RoaXMubWF4Um93Q291bnR9IGFscmVhZHkgcmVhY2hlZC5gKTtcbiAgICB9XG4gICAgdGhpcy5yb3dDb3VudCArPSAxO1xuICAgIC8vIFRPRE86IEFkanVzdCBncmlkXG4gIH1cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBSZW5kZXIgdGhlIGdyaWQgYnkgZ2VuZXJhdGluZyBhbmQgYWRkaW5nIGEgbmV3IERPTSBlbGVtZW50IGZvclxuICAgKiBlYWNoIGNlbGwgaW4gdGhlIGdyaWQuXG4gICAqIEBtZW1iZXJvZiBHcmlkXG4gICAqL1xuICBtYWtlR3JpZCgpIHtcbiAgICBjb25zdCBncmlkQ2VsbFRlbXBsYXRlID0gJzxkaXYgY2xhc3M9XCJkZXNpZ24tZ3JpZC1jZWxsXCI+PC9kaXY+JztcbiAgICBsZXQgZ3JpZENlbGxFbGVtZW50cyA9ICcnO1xuICAgIGZvciAobGV0IHJvd05vID0gMDsgcm93Tm8gPCB0aGlzLnJvd0NvdW50OyByb3dObysrKSB7XG4gICAgICBmb3IgKGxldCBjb2x1bW5ObyA9IDA7IGNvbHVtbk5vIDwgdGhpcy5jb2x1bW5Db3VudDsgY29sdW1uTm8rKykge1xuICAgICAgICBncmlkQ2VsbEVsZW1lbnRzICs9IGdyaWRDZWxsVGVtcGxhdGU7XG4gICAgICB9XG4gICAgfVxuICAgICQoIFwiLmRlc2lnbi1ncmlkXCIgKS5hcHBlbmQoIGdyaWRDZWxsRWxlbWVudHMgKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBHcmlkO1xuIiwiaW1wb3J0IEFwcFdpbmRvdyBmcm9tICcuLi9jbGFzc2VzL0FwcFdpbmRvdyc7XG5pbXBvcnQgR3JpZCBmcm9tICcuLi9jbGFzc2VzL0dyaWQnO1xuXG5sZXQgZGVzaWduR3JpZCA9IG51bGw7XG5jb25zdCBhcHBXaW5kb3cgPSBuZXcgQXBwV2luZG93KCk7XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICBjb25zb2xlLmNsZWFyKCk7XG5cbiAgZGVzaWduR3JpZCA9IG5ldyBHcmlkKFxuICAgIGFwcFdpbmRvdy5nZXRDc3NWYXJpYWJsZSgnZGVzaWduR3JpZFJvd0NvdW50JywgJ251bWJlcicpLCBcbiAgICBhcHBXaW5kb3cuZ2V0Q3NzVmFyaWFibGUoJ2Rlc2lnbkdyaWRDb2x1bW5Db3VudCcsICdudW1iZXInKVxuICApO1xuXG4gIGNvbnNvbGUubG9nKGRlc2lnbkdyaWQpO1xuICBkZXNpZ25HcmlkLm1ha2VHcmlkKCk7XG5cbiAgLy8gQ3JlYXRlIGEgYnV0dG9uIGhhbmRsZXIgZm9yIHRoZSBvbi9vZmYgYnV0dG9uXG4gICQoXCIucm93LW1pbnVzXCIpLmNsaWNrKChldmVudCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coYEludGVyY2VwdGVkIHJvdyBtaW51cyBjbGljay4gZXZlbnQ6ICR7ZXZlbnR9YCk7XG4gICAgICBkZXNpZ25HcmlkLmRlY3JSb3dDb3VudCgpO1xuICB9KTtcblxufSk7XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsTUFBTSxTQUFTLENBQUM7Ozs7OztFQU1kLGNBQWMsQ0FBQyxVQUFVLEVBQUUsT0FBTyxFQUFFO0lBQ2xDLE1BQU0sVUFBVSxHQUFHLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7SUFDM0UsTUFBTSxRQUFRLEdBQUcsVUFBVSxDQUFDLGdCQUFnQixDQUFDLElBQUksR0FBRyxVQUFVLENBQUMsQ0FBQztJQUNoRSxJQUFJLFFBQVEsR0FBRyxJQUFJLENBQUM7SUFDcEIsUUFBUSxPQUFPO01BQ2IsS0FBSyxRQUFRO1FBQ1gsUUFBUSxHQUFHLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUM5QixNQUFNO01BQ1IsS0FBSyxRQUFRO1FBQ1gsUUFBUSxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDckMsTUFBTTtNQUNSO1FBQ0UsTUFBTSxJQUFJLEtBQUssQ0FBQyxDQUFDLHNDQUFzQyxFQUFFLFNBQVMsQ0FBQztxQkFDdEQsQ0FBQyxDQUFDLENBQUM7S0FDbkI7SUFDRCxPQUFPLFFBQVEsQ0FBQztHQUNqQjs7Ozs7Ozs7RUFRRCxjQUFjLENBQUMsVUFBVSxFQUFFLFFBQVEsRUFBRTtJQUNuQyxRQUFRLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsSUFBSSxHQUFHLFVBQVUsRUFBRSxRQUFRLENBQUMsQ0FBQztHQUN6RTtDQUNGOztBQ2pDRCxNQUFNLElBQUksQ0FBQzs7Ozs7OztFQU9ULFdBQVcsQ0FBQyxXQUFXLEVBQUUsUUFBUSxFQUFFOztJQUVqQyxJQUFJLEtBQUssQ0FBQyxXQUFXLENBQUMsRUFBRTtNQUN0QixPQUFPLElBQUksS0FBSyxDQUFDLENBQUMsNkJBQTZCLEVBQUUsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDbEU7SUFDRCxJQUFJLFdBQVcsR0FBRyxDQUFDLElBQUksV0FBVyxHQUFHLEVBQUUsRUFBRTtNQUN2QyxPQUFPLElBQUksS0FBSyxDQUFDLENBQUMsdUNBQXVDLEVBQUUsV0FBVyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7S0FDdkY7O0lBRUQsSUFBSSxLQUFLLENBQUMsUUFBUSxDQUFDLEVBQUU7TUFDbkIsT0FBTyxJQUFJLEtBQUssQ0FBQyxDQUFDLDZCQUE2QixFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQy9EO0lBQ0QsSUFBSSxRQUFRLEdBQUcsQ0FBQyxJQUFJLFFBQVEsR0FBRyxFQUFFLEVBQUU7TUFDakMsT0FBTyxJQUFJLEtBQUssQ0FBQyxDQUFDLHVDQUF1QyxFQUFFLFFBQVEsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO0tBQ3BGOzs7SUFHRCxJQUFJLENBQUMsV0FBVyxHQUFHLFdBQVcsQ0FBQztJQUMvQixJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztJQUN6QixJQUFJLENBQUMsY0FBYyxHQUFHLENBQUMsQ0FBQztJQUN4QixJQUFJLENBQUMsY0FBYyxHQUFHLEVBQUUsQ0FBQztJQUN6QixJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQztJQUNyQixJQUFJLENBQUMsV0FBVyxHQUFHLEVBQUUsQ0FBQztJQUN0QixJQUFJLENBQUMsb0JBQW9CLEdBQUcsb0JBQW9CLENBQUM7Ozs7SUFJakQsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDckMsS0FBSyxJQUFJLEtBQUssR0FBRyxDQUFDLEVBQUUsS0FBSyxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQUUsS0FBSyxFQUFFLEVBQUU7TUFDbEQsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxJQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7TUFDL0MsS0FBSyxJQUFJLFFBQVEsR0FBRyxDQUFDLEVBQUUsUUFBUSxHQUFHLElBQUksQ0FBQyxXQUFXLEVBQUUsUUFBUSxFQUFFLEVBQUU7UUFDOUQsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxRQUFRLENBQUMsR0FBRyxJQUFJLENBQUMsb0JBQW9CLENBQUM7T0FDeEQ7S0FDRjtHQUNGOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7RUEyQkQsY0FBYyxHQUFHO0lBQ2YsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDO0dBQ3pCOzs7Ozs7O0VBT0QsY0FBYyxDQUFDLEtBQUssRUFBRTtJQUNwQixJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsRUFBRTtNQUNoQixPQUFPLElBQUksS0FBSyxDQUFDLENBQUMsNkJBQTZCLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDNUQ7SUFDRCxJQUFJLEtBQUssR0FBRyxDQUFDLElBQUksS0FBSyxHQUFHLEVBQUUsRUFBRTtNQUMzQixPQUFPLElBQUksS0FBSyxDQUFDLENBQUMsdUNBQXVDLEVBQUUsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7S0FDakY7SUFDRCxJQUFJLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQzs7R0FFM0I7Ozs7Ozs7O0VBUUQsV0FBVyxHQUFHO0lBQ1osT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0dBQ3RCOzs7Ozs7O0VBT0QsV0FBVyxDQUFDLEtBQUssRUFBRTtJQUNqQixJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsRUFBRTtNQUNoQixPQUFPLElBQUksS0FBSyxDQUFDLENBQUMsMEJBQTBCLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDekQ7SUFDRCxJQUFJLEtBQUssR0FBRyxDQUFDLElBQUksS0FBSyxHQUFHLEVBQUUsRUFBRTtNQUMzQixPQUFPLElBQUksS0FBSyxDQUFDLENBQUMsb0NBQW9DLEVBQUUsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7S0FDOUU7SUFDRCxJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQzs7R0FFeEI7Ozs7Ozs7RUFPRCxlQUFlLEdBQUc7SUFDaEIsSUFBSSxJQUFJLENBQUMsV0FBVyxLQUFLLElBQUksQ0FBQyxjQUFjLEVBQUU7TUFDNUMsT0FBTyxJQUFJLEtBQUssQ0FBQyxDQUFDLHFCQUFxQixFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDO0tBQ2xGO0lBQ0QsSUFBSSxDQUFDLFdBQVcsSUFBSSxDQUFDLENBQUM7O0dBRXZCOzs7Ozs7O0VBT0QsZUFBZSxHQUFHO0lBQ2hCLElBQUksSUFBSSxDQUFDLFlBQVksS0FBSyxJQUFJLENBQUMsY0FBYyxFQUFFO01BQzdDLE9BQU8sSUFBSSxLQUFLLENBQUMsQ0FBQyxxQkFBcUIsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQztLQUNsRjtJQUNELElBQUksQ0FBQyxXQUFXLElBQUksQ0FBQyxDQUFDOztHQUV2Qjs7Ozs7OztFQU9ELFlBQVksR0FBRztJQUNiLE9BQU8sQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDMUIsSUFBSSxJQUFJLENBQUMsU0FBUyxLQUFLLElBQUksQ0FBQyxXQUFXLEVBQUU7TUFDdkMsT0FBTyxJQUFJLEtBQUssQ0FBQyxDQUFDLHFCQUFxQixFQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDO0tBQy9FO0lBQ0QsSUFBSSxDQUFDLFFBQVEsSUFBSSxDQUFDLENBQUM7O0dBRXBCOzs7Ozs7O0VBT0QsWUFBWSxHQUFHO0lBQ2IsSUFBSSxJQUFJLENBQUMsU0FBUyxLQUFLLElBQUksQ0FBQyxXQUFXLEVBQUU7TUFDdkMsT0FBTyxJQUFJLEtBQUssQ0FBQyxDQUFDLHFCQUFxQixFQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDO0tBQy9FO0lBQ0QsSUFBSSxDQUFDLFFBQVEsSUFBSSxDQUFDLENBQUM7O0dBRXBCOzs7Ozs7RUFNRCxRQUFRLEdBQUc7SUFDVCxNQUFNLGdCQUFnQixHQUFHLHNDQUFzQyxDQUFDO0lBQ2hFLElBQUksZ0JBQWdCLEdBQUcsRUFBRSxDQUFDO0lBQzFCLEtBQUssSUFBSSxLQUFLLEdBQUcsQ0FBQyxFQUFFLEtBQUssR0FBRyxJQUFJLENBQUMsUUFBUSxFQUFFLEtBQUssRUFBRSxFQUFFO01BQ2xELEtBQUssSUFBSSxRQUFRLEdBQUcsQ0FBQyxFQUFFLFFBQVEsR0FBRyxJQUFJLENBQUMsV0FBVyxFQUFFLFFBQVEsRUFBRSxFQUFFO1FBQzlELGdCQUFnQixJQUFJLGdCQUFnQixDQUFDO09BQ3RDO0tBQ0Y7SUFDRCxDQUFDLEVBQUUsY0FBYyxFQUFFLENBQUMsTUFBTSxFQUFFLGdCQUFnQixFQUFFLENBQUM7R0FDaEQ7Q0FDRjs7QUNsTEQsSUFBSSxVQUFVLEdBQUcsSUFBSSxDQUFDO0FBQ3RCLE1BQU0sU0FBUyxHQUFHLElBQUksU0FBUyxFQUFFLENBQUM7O0FBRWxDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxLQUFLLENBQUMsV0FBVztFQUMzQixPQUFPLENBQUMsS0FBSyxFQUFFLENBQUM7O0VBRWhCLFVBQVUsR0FBRyxJQUFJLElBQUk7SUFDbkIsU0FBUyxDQUFDLGNBQWMsQ0FBQyxvQkFBb0IsRUFBRSxRQUFRLENBQUM7SUFDeEQsU0FBUyxDQUFDLGNBQWMsQ0FBQyx1QkFBdUIsRUFBRSxRQUFRLENBQUM7R0FDNUQsQ0FBQzs7RUFFRixPQUFPLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0VBQ3hCLFVBQVUsQ0FBQyxRQUFRLEVBQUUsQ0FBQzs7O0VBR3RCLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLEtBQUs7TUFDN0IsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLG9DQUFvQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztNQUM1RCxVQUFVLENBQUMsWUFBWSxFQUFFLENBQUM7R0FDN0IsQ0FBQyxDQUFDOztDQUVKLENBQUMsQ0FBQzs7OzsifQ==
